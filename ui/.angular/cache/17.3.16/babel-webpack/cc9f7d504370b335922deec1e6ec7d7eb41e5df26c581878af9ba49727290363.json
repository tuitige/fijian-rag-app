{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/translation.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ArticleReviewComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 4);\n    i0.…µ…µtext(1, \"Loading...\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction ArticleReviewComponent_div_7_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 14);\n    i0.…µ…µtext(1, \"\\u2705 Verified\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction ArticleReviewComponent_div_7_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 15);\n    i0.…µ…µtext(1, \"\\u23F3 Needs Review\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction ArticleReviewComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 5)(1, \"div\", 6);\n    i0.…µ…µtext(2);\n    i0.…µ…µtemplate(3, ArticleReviewComponent_div_7_span_3_Template, 2, 0, \"span\", 7)(4, ArticleReviewComponent_div_7_span_4_Template, 2, 0, \"span\", 8);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(5, \"p\")(6, \"strong\");\n    i0.…µ…µtext(7, \"FJ:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(8);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(9, \"label\", 9)(10, \"strong\");\n    i0.…µ…µtext(11, \"EN:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(12, \"textarea\", 10);\n    i0.…µ…µtwoWayListener(\"ngModelChange\", function ArticleReviewComponent_div_7_Template_textarea_ngModelChange_12_listener($event) {\n      const p_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      i0.…µ…µtwoWayBindingSet(p_r2.translatedParagraph, $event) || (p_r2.translatedParagraph = $event);\n      return i0.…µ…µresetView($event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(13, \"div\", 11)(14, \"button\", 12);\n    i0.…µ…µlistener(\"click\", function ArticleReviewComponent_div_7_Template_button_click_14_listener() {\n      const p_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.saveAndVerify(p_r2));\n    });\n    i0.…µ…µtext(15, \" Save & Verify \\u2705 \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(16, \"button\", 13);\n    i0.…µ…µlistener(\"click\", function ArticleReviewComponent_div_7_Template_button_click_16_listener() {\n      const p_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.recordFijianSpeakerAudio(p_r2));\n    });\n    i0.…µ…µtext(17, \" \\uD83C\\uDF99\\uFE0F Record Fiji Speaker Audio \");\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate2(\" Paragraph \", i_r4 + 1, \" | Confidence: \", p_r2.confidence || \"N/A\", \" \");\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", p_r2.verified);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", !p_r2.verified);\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", p_r2.originalParagraph, \"\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtwoWayProperty(\"ngModel\", p_r2.translatedParagraph);\n  }\n}\nexport let ArticleReviewComponent = /*#__PURE__*/(() => {\n  class ArticleReviewComponent {\n    translationService;\n    paragraphs = [];\n    title = '';\n    articleId = '';\n    newIndex = 0;\n    showOnlyUnverified = false;\n    loading = true;\n    newFijian = '';\n    newEnglish = '';\n    constructor(translationService) {\n      this.translationService = translationService;\n    }\n    ngOnInit() {\n      // Try to get articleId from URL query param\n      const urlParams = new URLSearchParams(window.location.search);\n      this.title = urlParams.get('title') || 'Nai Lalakai - unspecified title';\n      this.articleId = urlParams.get('id') || '43289bae-09f2-4c5e-bfa4-fd5433f10cd8';\n      this.translationService.getParagraphsById(this.articleId).subscribe(data => {\n        // Auto-assign index if not already present\n        this.paragraphs = data.map((p, i) => ({\n          ...p,\n          index: i\n        }));\n        this.paragraphs = data;\n        this.loading = false;\n      });\n    }\n    saveAndVerify(paragraph) {\n      const payload = {\n        articleId: paragraph.articleId,\n        index: paragraph.index,\n        originalParagraph: paragraph.originalParagraph,\n        translatedParagraph: paragraph.translatedParagraph\n      };\n      this.translationService.verifyParagraph(payload).subscribe(res => {\n        paragraph.verified = true;\n        alert('‚úî Translation saved and verified');\n      }, err => {\n        console.error(err);\n        alert('‚ùå Failed to verify');\n      });\n    }\n    toggleFilter() {\n      this.showOnlyUnverified = !this.showOnlyUnverified;\n    }\n    get filteredParagraphs() {\n      return this.showOnlyUnverified ? this.paragraphs.filter(p => !p.verified) : this.paragraphs;\n    }\n    addNewTranslation() {\n      const newItem = {\n        articleId: this.title,\n        index: this.newIndex,\n        originalParagraph: this.newFijian,\n        translatedParagraph: this.newEnglish\n      };\n      this.translationService.verifyParagraph(newItem).subscribe(res => {\n        alert('‚úî New translation saved');\n        this.paragraphs.push({\n          ...newItem,\n          verified: true\n        });\n        this.newFijian = '';\n        this.newEnglish = '';\n      }, err => {\n        console.error(err);\n        alert('‚ùå Failed to add translation');\n      });\n    }\n    recordFijianSpeakerAudio(paragraph) {\n      alert(`üéôÔ∏è [Placeholder] Record Fiji Speaker Audio for: ${paragraph.originalParagraph.slice(0, 40)}...`);\n    }\n    static …µfac = function ArticleReviewComponent_Factory(t) {\n      return new (t || ArticleReviewComponent)(i0.…µ…µdirectiveInject(i1.TranslationService));\n    };\n    static …µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: ArticleReviewComponent,\n      selectors: [[\"app-article-review\"]],\n      standalone: true,\n      features: [i0.…µ…µStandaloneFeature],\n      decls: 8,\n      vars: 5,\n      consts: [[1, \"text-xl\", \"font-bold\", \"mb-4\"], [1, \"mb-4\", \"px-4\", \"py-2\", \"rounded\", \"bg-blue-100\", \"hover:bg-blue-200\", 3, \"click\"], [\"class\", \"text-gray-500\", 4, \"ngIf\"], [\"class\", \"border p-4 mb-3 rounded shadow\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-gray-500\"], [1, \"border\", \"p-4\", \"mb-3\", \"rounded\", \"shadow\"], [1, \"text-sm\", \"text-gray-500\", \"mb-1\"], [\"class\", \"ml-2 text-green-600\", 4, \"ngIf\"], [\"class\", \"ml-2 text-red-500\", 4, \"ngIf\"], [1, \"englishLabelTextArea\", \"block\", \"mt-2\"], [\"rows\", \"3\", 1, \"w-full\", \"p-2\", \"border\", \"rounded\", \"mt-1\", 3, \"ngModelChange\", \"ngModel\"], [1, \"flex\", \"flex-wrap\", \"gap-2\", \"mt-2\"], [1, \"save-verify\", 3, \"click\"], [1, \"record-audio\", 3, \"click\"], [1, \"ml-2\", \"text-green-600\"], [1, \"ml-2\", \"text-red-500\"]],\n      template: function ArticleReviewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"h2\", 0);\n          i0.…µ…µtext(1);\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(2, \"button\", 1);\n          i0.…µ…µlistener(\"click\", function ArticleReviewComponent_Template_button_click_2_listener() {\n            return ctx.toggleFilter();\n          });\n          i0.…µ…µtext(3);\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(4, \"p\");\n          i0.…µ…µtext(5);\n          i0.…µ…µelementEnd();\n          i0.…µ…µtemplate(6, ArticleReviewComponent_div_6_Template, 2, 0, \"div\", 2)(7, ArticleReviewComponent_div_7_Template, 18, 6, \"div\", 3);\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance();\n          i0.…µ…µtextInterpolate1(\"\\uD83D\\uDCF0 Article Review: \", ctx.title, \"\");\n          i0.…µ…µadvance(2);\n          i0.…µ…µtextInterpolate1(\" Show: \", ctx.showOnlyUnverified ? \"All\" : \"Unverified Only\", \"\\n\");\n          i0.…µ…µadvance(2);\n          i0.…µ…µtextInterpolate1(\"Total loaded: \", ctx.filteredParagraphs.length, \"\");\n          i0.…µ…µadvance();\n          i0.…µ…µproperty(\"ngIf\", ctx.loading);\n          i0.…µ…µadvance();\n          i0.…µ…µproperty(\"ngForOf\", ctx.filteredParagraphs);\n        }\n      },\n      dependencies: [CommonModule, i2.NgForOf, i2.NgIf, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, HttpClientModule],\n      styles: [\".page-title[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:1rem}.loading[_ngcontent-%COMP%]{font-style:italic;padding:1rem}.paragraph-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 1px 4px #0000001a;padding:1rem;margin-bottom:1.5rem}.fj[_ngcontent-%COMP%], .en[_ngcontent-%COMP%]{margin-bottom:.5rem}.controls[_ngcontent-%COMP%]{margin-top:.5rem}.verify-btn[_ngcontent-%COMP%]{background-color:#34a853;border:none;color:#fff;padding:6px 12px;border-radius:4px;cursor:pointer}.verified-badge[_ngcontent-%COMP%]{font-size:.9rem;color:#2e7d32;font-weight:700}textarea[_ngcontent-%COMP%], .englishLabelTextArea[_ngcontent-%COMP%]{width:100%;max-width:100%}button.save-verify[_ngcontent-%COMP%]{background-color:#16a34a;color:#fff;font-weight:600;border-radius:.5rem;padding:.5rem 1rem;transition:background-color .2s ease-in-out;margin-right:20px}button.save-verify[_ngcontent-%COMP%]:hover{background-color:#15803d}button.record-audio[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;font-weight:600;border-radius:.5rem;padding:.5rem 1rem;transition:background-color .2s ease-in-out}button.record-audio[_ngcontent-%COMP%]:hover{background-color:#2563eb}\"]\n    });\n  }\n  return ArticleReviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}