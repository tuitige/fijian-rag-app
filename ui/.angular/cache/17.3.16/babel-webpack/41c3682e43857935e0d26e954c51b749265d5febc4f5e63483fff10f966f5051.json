{"ast":null,"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { InternalGraphQLAPIClass } from '@aws-amplify/api-graphql/internals';\nimport { RestAPIClass } from '@aws-amplify/api-rest';\nimport { Auth } from '@aws-amplify/auth';\nimport { Cache } from '@aws-amplify/cache';\nimport { Amplify, ApiAction, Category, Credentials, ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('API');\n/**\n * @deprecated\n * Use RestApi or GraphQLAPI to reduce your application bundle size\n * Export Cloud Logic APIs\n */\nvar InternalAPIClass = /** @class */function () {\n  /**\n   * Initialize API with AWS configuration\n   * @param {Object} options - Configuration object for API\n   */\n  function InternalAPIClass(options) {\n    this.Auth = Auth;\n    this.Cache = Cache;\n    this.Credentials = Credentials;\n    this._options = options;\n    this._restApi = new RestAPIClass(options);\n    this._graphqlApi = new InternalGraphQLAPIClass(options);\n    logger.debug('API Options', this._options);\n  }\n  InternalAPIClass.prototype.getModuleName = function () {\n    return 'InternalAPI';\n  };\n  /**\n   * Configure API part with aws configurations\n   * @param {Object} config - Configuration of the API\n   * @return {Object} - The current configuration\n   */\n  InternalAPIClass.prototype.configure = function (options) {\n    this._options = Object.assign({}, this._options, options);\n    // Share Amplify instance with client for SSR\n    this._restApi.Credentials = this.Credentials;\n    this._graphqlApi.Auth = this.Auth;\n    this._graphqlApi.Cache = this.Cache;\n    this._graphqlApi.Credentials = this.Credentials;\n    var restAPIConfig = this._restApi.configure(this._options);\n    var graphQLAPIConfig = this._graphqlApi.configure(this._options);\n    return __assign(__assign({}, restAPIConfig), graphQLAPIConfig);\n  };\n  /**\n   * Make a GET request\n   * @param apiName - The api name of the request\n   * @param path - The path of the request\n   * @param [init] - Request extra params\n   * @return A promise that resolves to an object with response status and JSON data, if successful.\n   */\n  InternalAPIClass.prototype.get = function (apiName, path, init) {\n    return this._restApi.get(apiName, path, this.getInitWithCustomUserAgentDetails(init, ApiAction.Get));\n  };\n  /**\n   * Make a POST request\n   * @param apiName - The api name of the request\n   * @param path - The path of the request\n   * @param [init] - Request extra params\n   * @return A promise that resolves to an object with response status and JSON data, if successful.\n   */\n  InternalAPIClass.prototype.post = function (apiName, path, init) {\n    return this._restApi.post(apiName, path, this.getInitWithCustomUserAgentDetails(init, ApiAction.Post));\n  };\n  /**\n   * Make a PUT request\n   * @param apiName - The api name of the request\n   * @param path - The path of the request\n   * @param [init] - Request extra params\n   * @return A promise that resolves to an object with response status and JSON data, if successful.\n   */\n  InternalAPIClass.prototype.put = function (apiName, path, init) {\n    return this._restApi.put(apiName, path, this.getInitWithCustomUserAgentDetails(init, ApiAction.Put));\n  };\n  /**\n   * Make a PATCH request\n   * @param apiName - The api name of the request\n   * @param path - The path of the request\n   * @param [init] - Request extra params\n   * @return A promise that resolves to an object with response status and JSON data, if successful.\n   */\n  InternalAPIClass.prototype.patch = function (apiName, path, init) {\n    return this._restApi.patch(apiName, path, this.getInitWithCustomUserAgentDetails(init, ApiAction.Patch));\n  };\n  /**\n   * Make a DEL request\n   * @param apiName - The api name of the request\n   * @param path - The path of the request\n   * @param [init] - Request extra params\n   * @return A promise that resolves to an object with response status and JSON data, if successful.\n   */\n  InternalAPIClass.prototype.del = function (apiName, path, init) {\n    return this._restApi.del(apiName, path, this.getInitWithCustomUserAgentDetails(init, ApiAction.Del));\n  };\n  /**\n   * Make a HEAD request\n   * @param apiName - The api name of the request\n   * @param path - The path of the request\n   * @param [init] - Request extra params\n   * @return A promise that resolves to an object with response status and JSON data, if successful.\n   */\n  InternalAPIClass.prototype.head = function (apiName, path, init) {\n    return this._restApi.head(apiName, path, this.getInitWithCustomUserAgentDetails(init, ApiAction.Head));\n  };\n  /**\n   * Checks to see if an error thrown is from an api request cancellation\n   * @param error - Any error\n   * @return If the error was from an api request cancellation\n   */\n  InternalAPIClass.prototype.isCancel = function (error) {\n    return this._restApi.isCancel(error);\n  };\n  /**\n   * Cancels an inflight request for either a GraphQL request or a Rest API request.\n   * @param request - request to cancel\n   * @param [message] - custom error message\n   * @return If the request was cancelled\n   */\n  InternalAPIClass.prototype.cancel = function (request, message) {\n    if (this._restApi.hasCancelToken(request)) {\n      return this._restApi.cancel(request, message);\n    } else if (this._graphqlApi.hasCancelToken(request)) {\n      return this._graphqlApi.cancel(request, message);\n    }\n    return false;\n  };\n  InternalAPIClass.prototype.getInitWithCustomUserAgentDetails = function (init, action) {\n    var customUserAgentDetails = {\n      category: Category.API,\n      action: action\n    };\n    var initParams = __assign(__assign({}, init), {\n      customUserAgentDetails: customUserAgentDetails\n    });\n    return initParams;\n  };\n  /**\n   * Getting endpoint for API\n   * @param apiName - The name of the api\n   * @return The endpoint of the api\n   */\n  InternalAPIClass.prototype.endpoint = function (apiName) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, this._restApi.endpoint(apiName)];\n      });\n    });\n  };\n  /**\n   * to get the operation type\n   * @param operation\n   */\n  InternalAPIClass.prototype.getGraphqlOperationType = function (operation) {\n    return this._graphqlApi.getGraphqlOperationType(operation);\n  };\n  InternalAPIClass.prototype.graphql = function (options, additionalHeaders, customUserAgentDetails) {\n    var apiUserAgentDetails = __assign({\n      category: Category.API,\n      action: ApiAction.GraphQl\n    }, customUserAgentDetails);\n    return this._graphqlApi.graphql(options, additionalHeaders, apiUserAgentDetails);\n  };\n  return InternalAPIClass;\n}();\nexport { InternalAPIClass };\nexport var InternalAPI = new InternalAPIClass(null);\nAmplify.register(InternalAPI);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}