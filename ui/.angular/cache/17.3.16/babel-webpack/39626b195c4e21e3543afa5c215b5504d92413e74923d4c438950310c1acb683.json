{"ast":null,"code":"import { __awaiter, __generator, __read, __spreadArray } from \"tslib\";\nexport var retryMiddleware = function (options) {\n  return function (next, context) {\n    return function (args) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var retryStrategy;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              return [4, options.retryStrategy()];\n            case 1:\n              retryStrategy = _a.sent();\n              if (retryStrategy === null || retryStrategy === void 0 ? void 0 : retryStrategy.mode) context.userAgent = __spreadArray(__spreadArray([], __read(context.userAgent || []), false), [[\"cfg/retry-mode\", retryStrategy.mode]], false);\n              return [2, retryStrategy.retry(next, args)];\n          }\n        });\n      });\n    };\n  };\n};\nexport var retryMiddlewareOptions = {\n  name: \"retryMiddleware\",\n  tags: [\"RETRY\"],\n  step: \"finalizeRequest\",\n  priority: \"high\",\n  override: true\n};\nexport var getRetryPlugin = function (options) {\n  return {\n    applyToStack: function (clientStack) {\n      clientStack.add(retryMiddleware(options), retryMiddlewareOptions);\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}