<table mat-table [dataSource]="items" class="mat-elevation-z2" *ngIf="!loading && items.length > 0" style="width: 100%; margin-top: 2rem;">

  <!-- Source Text Column (Fijian + Tooltip Icon) -->
  <ng-container matColumnDef="sourceText">
    <th mat-header-cell *matHeaderCellDef> 
      <mat-icon matTooltip="Fijian phrase or vocab">translate</mat-icon> 
    </th>
    <td mat-cell *matCellDef="let item">
      <strong>{{ item.sourceText }}</strong>
    </td>
  </ng-container>

  <!-- AI Translation Column -->
  <ng-container matColumnDef="aiTranslation">
    <th mat-header-cell *matHeaderCellDef>
      <mat-icon matTooltip="AI-generated English translation">smart_toy</mat-icon>
    </th>
    <td mat-cell *matCellDef="let item">
      {{ item.aiTranslation }}
    </td>
  </ng-container>

  <!-- Final Editable Translation Column -->
  <ng-container matColumnDef="finalTranslation">
    <th mat-header-cell *matHeaderCellDef> Final Translation </th>
    <td mat-cell *matCellDef="let item">
      <textarea [(ngModel)]="item.finalTranslation"
                placeholder="Edit or confirm..."
                rows="2"
                style="width: 100%; font-size: 0.95rem; padding: 6px; border-radius: 6px; border: 1px solid #ccc;"></textarea>
    </td>
  </ng-container>

  <!-- Actions Column -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef> Actions </th>
    <td mat-cell *matCellDef="let item" style="text-align: right;">
      <button mat-raised-button color="primary"
              (click)="verifyItem(item)"
              [disabled]="verifyingItemId === item.dataKey">
        <mat-spinner *ngIf="verifyingItemId === item.dataKey" diameter="20"></mat-spinner>
        <span *ngIf="verifyingItemId !== item.dataKey">Verify</span>
      </button>
      <mat-icon *ngIf="item.verified" color="accent" matTooltip="Verified by human expert">verified_user</mat-icon>
    </td>
  </ng-container>

  <!-- Header and Row definitions -->
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

</table>
