<div style="padding: 2rem; max-width: 1200px; margin: auto;">
  <h1 style="font-size: 2rem; margin-bottom: 1rem;">Verify Fijian Translations</h1>

  <p style="font-size: 1.1rem; margin-bottom: 1rem;">
    This tool allows native speakers to review and verify AI-generated Fijian translations.
    By validating each vocabulary word, phrase, or paragraph, we help build a high-quality training dataset that will be used in Retrieval-Augmented Generation (RAG) systems to teach and preserve the Fijian language.
  </p>

  <mat-tab-group [selectedIndex]="selectedTabIndex" (selectedIndexChange)="selectTab($event)">
    <mat-tab label="Vocabulary"></mat-tab>
    <mat-tab label="Phrases"></mat-tab>
    <mat-tab label="Paragraphs"></mat-tab>
  </mat-tab-group>

  <div *ngIf="!loading && items.length === 0" style="margin-top: 2rem;">
    <p>No items found for verification.</p>
  </div>

<mat-table [dataSource]="items" class="mat-elevation-z2" *ngIf="!loading && items.length > 0">

  <!-- Fijian & AI Translation Column -->
  <ng-container matColumnDef="text">
    <mat-row *matRowDef="let item; columns: displayedColumns;"></mat-row>
    <mat-header-cell *matHeaderCellDef> Translation </mat-header-cell>
    <mat-cell *matCellDef="let item">
      <div>
        <mat-icon matTooltip="Fijian phrase or vocab">translate</mat-icon>
        <strong>{{ item.sourceText }}</strong>
      </div>
      <div>
        <mat-icon matTooltip="AI-generated English translation">smart_toy</mat-icon>
        {{ item.aiTranslation }}
      </div>
    </mat-cell>
  </ng-container>

  <!-- Final Translation Column -->
  <ng-container matColumnDef="final">
    <mat-header-cell *matHeaderCellDef> Verified Translation </mat-header-cell>
    <mat-cell *matCellDef="let item">
      <textarea [(ngModel)]="item.finalTranslation"
                placeholder="Edit or confirm..."
                rows="2"
                style="width: 100%; font-size: 0.95rem;"></textarea>
    </mat-cell>
  </ng-container>

  <!-- Verify Button Column -->
  <ng-container matColumnDef="actions">
    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
    <mat-cell *matCellDef="let item">
      <button mat-raised-button color="primary"
              (click)="verifyItem(item)"
              [disabled]="verifyingItemId === item.dataKey">
        <mat-spinner *ngIf="verifyingItemId === item.dataKey" diameter="20"></mat-spinner>
        <span *ngIf="verifyingItemId !== item.dataKey">Verify</span>
      </button>
      <mat-icon *ngIf="item.verified" matTooltip="Verified by human expert">verified_user</mat-icon>
    </mat-cell>
  </ng-container>

</mat-table>

</div>

