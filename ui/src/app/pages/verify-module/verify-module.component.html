<div *ngIf="loading" class="text-center text-gray-500 p-4">Loading...</div>

<div *ngIf="!loading" class="p-4 max-w-3xl mx-auto">
  <h2 class="text-2xl font-bold mb-6">Modules Loaded: {{ modules.length }}</h2>

  <button 
    (click)="toggleEditing()" 
    class="mb-4 px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600">
    ✏️ {{ isEditing ? 'Finish Editing' : 'Edit Module' }}
  </button>

  <div *ngFor="let mod of modules" class="mb-8 p-4 border rounded shadow-sm bg-white">
    <h3 class="text-xl font-semibold mb-2">{{ mod.title }}</h3>
    <p class="text-gray-600 mb-4">{{ mod.summary }}</p>

    <div *ngFor="let ex of mod.examples" class="mb-4 p-3 bg-gray-50 rounded">
        <div *ngIf="isEditing; else readView">
          <label class="block text-sm font-medium">Fijian:</label>
          <input [(ngModel)]="ex.fijian" class="w-full mb-2 border p-1 rounded" />
      
          <label class="block text-sm font-medium">English:</label>
          <input [(ngModel)]="ex.english" class="w-full mb-2 border p-1 rounded" />
      
          <label class="block text-sm font-medium">Notes:</label>
          <textarea [(ngModel)]="ex.notes" rows="2" class="w-full border p-1 rounded"></textarea>
        </div>
      
        <ng-template #readView>
          <p><strong>Fijian:</strong> {{ ex.fijian }}</p>
          <p><strong>English:</strong> {{ ex.english }}</p>
          <p class="text-sm text-gray-500"><strong>Notes:</strong> {{ ex.notes }}</p>
        </ng-template>
      </div>
 
    <div class="flex items-center gap-4 mt-4">
        <button 
          (click)="verifyCurrentModule()" 
          [disabled]="verified"
          class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed">
          ✅ Mark This Module As Verified
        </button>
      
        <span *ngIf="verified" class="text-green-700 text-sm font-medium">
          ✅ Verified
        </span>
    </div>    


  </div>
</div>
