<app-header></app-header>

<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h2>Translation Training</h2>
      
      <!-- Source Text -->
      <div class="form-group mb-3">
        <label for="sourceText">Source Text</label>
        <textarea
          id="sourceText"
          [(ngModel)]="sourceText"
          class="form-control"
          rows="4"
          placeholder="Enter text to translate">
        </textarea>
      </div>

      <!-- Language Selection -->
      <div class="form-group mb-3">
        <label>Source Language:</label>
        <div class="btn-group" role="group">
          <button
            type="button"
            class="btn"
            [class.btn-primary]="sourceLanguage === 'fj'"
            [class.btn-outline-primary]="sourceLanguage !== 'fj'"
            (click)="sourceLanguage = 'fj'">
            Fijian
          </button>
          <button
            type="button"
            class="btn"
            [class.btn-primary]="sourceLanguage === 'en'"
            [class.btn-outline-primary]="sourceLanguage !== 'en'"
            (click)="sourceLanguage = 'en'">
            English
          </button>
        </div>
      </div>

      <!-- Translate Button -->
      <button
        class="btn btn-primary mb-3"
        (click)="translate()"
        [disabled]="isTranslating">
        {{ isTranslating ? 'Translating...' : 'Translate' }}
      </button>

      <!-- Translation Result -->
      <div *ngIf="currentTranslation" class="mb-3">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h3>Translation Result</h3>
          <button
            class="btn btn-sm btn-outline-secondary"
            (click)="toggleRawResponse()">
            {{ showRawResponse ? 'Hide Raw Response' : 'Show Raw Response' }}
          </button>
        </div>

        <pre *ngIf="showRawResponse">{{ currentTranslation?.rawResponse }}</pre>

        <!-- Verified Translation -->
        <div class="form-group">
          <label for="verifiedTranslation">Verified Translation</label>
          <textarea
            id="verifiedTranslation"
            [(ngModel)]="verifiedTranslation"
            class="form-control"
            rows="4">
            [value]="verifiedTranslation?.trim()">
          </textarea>
        </div>

        <!-- Verify Button -->
        <button
          class="btn btn-success mt-3"
          (click)="verifyTranslation()"
          [disabled]="isVerifying">
          {{ isVerifying ? 'Verifying...' : 'Verify Translation' }}
        </button>
      </div>

      <!-- Error Message -->
      <div *ngIf="error" class="alert alert-danger mt-3">
        {{ error }}
      </div>

      <!-- Success Message -->
      <div *ngIf="verificationSuccess" class="alert alert-success mt-3">
        {{ verificationSuccess }}
      </div>
    </div>
  </div>
</div>
